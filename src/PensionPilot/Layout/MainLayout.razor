@inherits LayoutComponentBase
<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>
    <main>
        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

@if (!hideDisclaimer)
{
<footer class="site-footer">
    <div class="footer-inner">
        <div class="footer-left">
            <strong>DISCLAIMER:</strong>
            The information and calculations on this site are for general informational purposes only and are provided “as is,” without any warranties, express or implied. Nothing herein constitutes financial, investment, tax, or legal advice.
            The operators bear no responsibility for errors, omissions, or inaccuracies, or for any decisions, actions, or losses arising from reliance on this tool.
            You assume sole responsibility for verifying results and for any outcomes derived from your use of the site.
        </div>
        <div class="footer-right">
            <button type="button" class="btn btn-sm btn-outline-light" @onclick="CloseDisclaimer" title="Hide">
                <span class="bi bi-x-lg"></span>
            </button>
        </div>
    </div>
</footer>
}

@code {
    private bool hideDisclaimer;
    [Inject] private IJSRuntime JS { get; set; } = default!;
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                hideDisclaimer = await JS.InvokeAsync<bool>("pp.getSessionFlag", "hideDisclaimer");
                if (hideDisclaimer)
                {
                    StateHasChanged();
                }
            }
            catch { }
        }
    }
    private async Task CloseDisclaimer()
    {
        hideDisclaimer = true;
        try { await JS.InvokeVoidAsync("pp.setSessionFlag", "hideDisclaimer", true); } catch { }
    }
}
